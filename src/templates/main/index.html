{% extends 'base.html' %}

{% block container %}
    <script type="text/javascript">
    function delete_item(to_delete)
    {
        $.ajax(
                {
                    url:'/',
                    type:'POST',
                    data:{to_delete:to_delete},
          //         success:function(response){alert("success")},
                    complete:function(){},
                    error:function (){
                        alert("error doing something");
                    }
                }
        )
    }
 /*   $.ajax({
    url:"/",
    type: "POST",
    data: {name: "sended"},
    success:function(response){alert("sent")},
    complete:function(){},
    error:function (){

    }
});
*/

    </script>
    <h3>You logged in as {{ user }}, these are your dashboards</h3>
<!-- Choose list !-->
    <div class="choose_list">
        {% for listprod in listproduct %}
        <p>{{ listprod.name}}</p>
        {% endfor %}
    </div>
    <!-- AddProduct form !-->
    <div class="add_form">
    <form action="." method="post">
        {% csrf_token %}
        <table>
            {{ form }}
            <tr>
                <td><input type="submit" value="Submit" /></td>
                <td></td>
            </tr>
        </table>
    </form>
    </div>

    <!-- Displaying elements in current dashboard !-->

    <div id="selector">
        <p>Shopping lists attacked to this dashboard :</p>
            {% for currBuyList1 in currBuyList %}
                {% for prod in currBuyList1.products.all %}
                    <p>{{ prod }} <input type="button" value="remove" id='{{ prod }}' onclick="delete_item(id)"> </p>
                {% endfor %}
            {% endfor %}
        <br>
    </div>
{% endblock %}

